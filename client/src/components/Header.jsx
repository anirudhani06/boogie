import './Header.scss';
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { DateRange } from 'react-date-range';
import 'react-date-range/dist/styles.css';
import 'react-date-range/dist/theme/default.css';
import { format } from 'date-fns';
const Header = () => {
  const navigate = useNavigate();
  const [user, setUser] = useState(true);
  const [date, setDate] = useState([
    {
      startDate: new Date(),
      endDate: new Date(),
      key: 'selection',
    },
  ]);
  const [openDate, setOpenDate] = useState(false);
  const [searchPlace, setSearchPlace] = useState('');

  const handleSearch = () => {
    setOpenDate(false);
    navigate('/search', { state: { searchPlace, date } });
    setSearchPlace('');
  };
  return (
    <header className="header">
      <div className="wrapper flex flex-jc-sb flex-ai-c py-12">
        <Link to={'/'} className="logo">
          <span>Boogie</span>
        </Link>
        <div className="search_filter flex flex-jc-sb ">
          <div>
            <input
              type="text"
              placeholder="Where are you going..."
              value={searchPlace}
              onChange={(e) => setSearchPlace(e.target.value)}
            />
          </div>
          <div
            className=" date flex flex-ai-c flex-jc-s g-8"
            onClick={() => setOpenDate(!openDate)}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              strokeWidth={1.5}
              stroke="currentColor"
              className="w-6 h-6"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"
              />
            </svg>
            <span>{`${format(date[0].startDate, 'MMM/dd/yy')} - ${format(
              date[0].endDate,
              'MMM/dd/yy'
            )}`}</span>
            {openDate && (
              <DateRange
                className="date-picker"
                editableDateInputs={true}
                onChange={(item) => setDate([item.selection])}
                moveRangeOnFirstSelection={false}
                ranges={date}
                minDate={new Date()}
              />
            )}
          </div>
          <button className="search-btn flex flex-ai-c flex-jc-c" onClick={() => handleSearch()}>
            <svg
              className="bi bi-search"
              fill="#fff"
              height="16"
              viewBox="0 0 16 16"
              width="16"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
            </svg>
          </button>
        </div>
        <Link to={user ? '/account' : '/login'} className="account flex flex-ai-c flex-jc-c g-8">
          <div className="hamburger flex flex-ai-c flex-jc-c">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              strokeWidth={1.5}
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </div>
          <div className="user-img flex flex-ai-c flex-jc-c">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              className="w-6 h-6 top-1"
            >
              <path
                fillRule="evenodd"
                d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
                clipRule="evenodd"
              />
            </svg>
          </div>
          <span>Anirudh</span>
        </Link>
      </div>
    </header>
  );
};

export default Header;
